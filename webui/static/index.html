<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UAV Person Detection - SAR System</title>
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect width="40" height="40" rx="8" fill="url(#gradient)"/>
                        <path d="M20 10L12 18H28L20 10Z" fill="white" opacity="0.9"/>
                        <circle cx="20" cy="25" r="5" stroke="white" stroke-width="2" fill="none"/>
                    </svg>
                    <defs>
                        <linearGradient id="gradient" x1="0" y1="0" x2="40" y2="40">
                            <stop offset="0%" stop-color="#667eea"/>
                            <stop offset="100%" stop-color="#764ba2"/>
                        </linearGradient>
                    </defs>
                </div>
                <div>
                    <h1>UAV Person Detection</h1>
                    <p class="subtitle">Search and Rescue System - Real-time Inference</p>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Configuration Panel -->
            <div class="config-panel">
                <div class="panel-header">
                    <h2>Configuration</h2>
                    <button class="btn-icon" id="refreshModels" title="Refresh models">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
                        </svg>
                    </button>
                </div>

                <!-- Model Selection -->
                <div class="form-group">
                    <label for="modelSelect">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/>
                            <line x1="8" y1="21" x2="16" y2="21"/>
                            <line x1="12" y1="17" x2="12" y2="21"/>
                        </svg>
                        Select Model
                    </label>
                    <select id="modelSelect" class="select-input">
                        <option value="">Loading models...</option>
                    </select>
                    <div class="model-info" id="modelInfo"></div>
                </div>

                <!-- Video Upload -->
                <div class="form-group">
                    <label for="videoUpload">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="17 8 12 3 7 8"/>
                            <line x1="12" y1="3" x2="12" y2="15"/>
                        </svg>
                        Upload Video
                    </label>
                    <div class="file-upload-wrapper">
                        <input type="file" id="videoUpload" accept="video/*" class="file-input">
                        <div class="file-upload-display" id="fileUploadDisplay">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                <circle cx="8.5" cy="8.5" r="1.5"/>
                                <polyline points="21 15 16 10 5 21"/>
                            </svg>
                            <p>Click to upload or drag and drop</p>
                            <span>MP4, AVI, MOV, MKV, WEBM</span>
                        </div>
                    </div>
                    <div class="video-info" id="videoInfo"></div>
                </div>

                <!-- Advanced Settings -->
                                    <details class="advanced-settings">
                        <summary>‚öôÔ∏è Advanced Settings</summary>
                        <div class="settings-content">
                            <div class="form-group">
                                <label>
                                    Confidence Threshold: <span id="confValue">0.5</span>
                                </label>
                                <input type="range" id="confThreshold" class="slider" min="0" max="1" step="0.05" value="0.5">
                            </div>
                            <div class="form-group">
                                <label>
                                    NMS Threshold: <span id="nmsValue">0.45</span>
                                </label>
                                <input type="range" id="nmsThreshold" class="slider" min="0" max="1" step="0.05" value="0.45">
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="benchmarkMode"> Enable Benchmark Mode
                                </label>
                                <p style="font-size: 0.875rem; color: var(--text-secondary); margin-top: 0.5rem;">
                                    Collects memory, CPU, temperature, and energy metrics (slower processing)
                                </p>
                            </div>
                        </div>
                    </details>

                <!-- Action Buttons -->
                <div class="action-buttons">
                    <button id="startInference" class="btn btn-primary" disabled>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M8 5v14l11-7z"/>
                        </svg>
                        Start Inference
                    </button>
                    <button id="stopInference" class="btn btn-secondary" disabled>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <rect x="6" y="6" width="12" height="12"/>
                        </svg>
                        Stop
                    </button>
                </div>
            </div>

            <!-- Display Panel -->
            <div class="display-panel">
                <!-- Video Display -->
                <div class="video-container" id="videoContainer">
                    <div class="placeholder">
                        <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                            <polygon points="23 7 16 12 23 17 23 7"/>
                            <rect x="1" y="5" width="15" height="14" rx="2" ry="2"/>
                        </svg>
                        <p>Upload a video to begin</p>
                    </div>
                    <img id="inferenceFrame" alt="Inference result" style="display: none;">
                    <div class="frame-overlay" id="frameOverlay">
                        <span id="frameCounter">Frame 0/0</span>
                    </div>
                </div>

                <!-- Stats Panel -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Current FPS</div>
                            <div class="stat-value" id="currentFps">0</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <polyline points="12 6 12 12 16 14"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Inference Time</div>
                            <div class="stat-value" id="inferenceTime">0 ms</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                                <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Avg Inference</div>
                            <div class="stat-value" id="avgInference">0 ms</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                                <line x1="12" y1="1" x2="12" y2="23"/>
                                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Progress</div>
                            <div class="stat-value" id="progress">0%</div>
                        </div>
                    </div>

                    <div class="stat-card" id="memoryCard" style="display: none;">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #a855f7 0%, #e879f9 100%);">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                                <rect x="2" y="7" width="20" height="14" rx="2"/>
                                <path d="M16 3v4M12 3v4M8 3v4"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Memory Usage</div>
                            <div class="stat-value" id="memoryUsage">-</div>
                        </div>
                    </div>

                    <div class="stat-card" id="cpuCard" style="display: none;">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #ef4444 0%, #f87171 100%);">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                                <rect x="4" y="4" width="16" height="16" rx="2"/>
                                <rect x="9" y="9" width="6" height="6"/>
                                <path d="M9 1v3M15 1v3M9 20v3M15 20v3M20 9h3M20 15h3M1 9h3M1 15h3"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">CPU Usage</div>
                            <div class="stat-value" id="cpuUsage">-</div>
                        </div>
                    </div>

                    <div class="stat-card" id="tempCard" style="display: none;">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                                <path d="M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Temperature</div>
                            <div class="stat-value" id="temperature">-</div>
                        </div>
                    </div>

                    <div class="stat-card" id="energyCard" style="display: none;">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #22c55e 0%, #4ade80 100%);">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                                <path d="M6 7h3m-3 10h5m-5-7h5M16 21V3M19 21V3"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Energy</div>
                            <div class="stat-value" id="energy">-</div>
                        </div>
                    </div>
                </div>

                <!-- Progress Bar -->
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Benchmark Results Section -->
        <div class="config-panel" id="benchmarkResults" style="margin-top: 2rem; display: none;">
            <div class="panel-header">
                <h2>üìä Benchmark Results</h2>
            </div>
            <div id="benchmarkContent"></div>
        </div>

        <!-- Status Messages -->
        <div id="statusMessages"></div>
    </div>

    <script src="/static/app.js?v=2"></script>
</body>
</html>
